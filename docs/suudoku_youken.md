


# 📘 要件定義書（軽量版）
**プロジェクト名:** World Sudoku（ワールド数独）  
**作成日:** 2025-10-29  
**バージョン:** 0.9（MVP想定）

---

## 1. 目的
本アプリは、数字の代わりに多言語の文字（アラビア文字、ローマ字、漢字など）を使用することで、  
**文化や文字の違いを感じながら遊べる数独体験**を提供することを目的とする。  
数独の基本ルールを保持しつつ、見た目・文化体験・継続性を重視した軽量アプリとして設計する。

---

## 2. プロジェクトスコープと開発フェーズ方針

### 2.1 スコープ概要
本プロジェクトは、数字ではなく多言語文字を使った数独体験を通じて、  
文化の多様性を感じられるモバイルアプリ「World Sudoku」を開発する。  

開発は以下の3フェーズで進行する。

| フェーズ | 目的 | リリース対象 | 位置付け |
|-----------|------|----------------|-----------|
| **MVP版（プロトタイプ）** | コア体験検証 | 社内／クローズド配信 | 価値仮説の検証 |
| **β版（限定リリース）** | 運用性・継続性検証 | 限定ユーザー公開 | 継続率・安定性テスト |
| **正式版（v1.0）** | 商用リリース | ストア公開 | 安定運用＋収益化開始 |


---


### 2.2 スコープ範囲（全体構成）

| 区分 | 内容 |
|------|------|
| **コア機能** | **数独ゲーム基本機能**（9×9盤面、ルール判定、入力・クリア判定）<br>**多文字スクリプト対応**（漢字・アラビア文字・ローマ字等での数字表示）<br>**デイリーパズル**（毎日更新の盤面配信） |
| 対象OS | iOS / Android |
| 使用技術 | Flutter + PlayFab + Firebase |
| データ保存 | PlayFab（ユーザー・スコア・ランキング） |
| デイリー配信 | Firebase Firestore / Hosting（パズル配信） |
| 通知 | Firebase Cloud Messaging |
| 広告 | Google AdMob |
| 対応言語 | 日本語・英語・アラビア語・イタリア語・フランス語・韓国語・ヒンディー語・スペイン語 |
| 非対応範囲 | アカウント連携、SNSシェア機能、オフラインランキング |

---

## 3. 機能要件

### 3.1 プレイ関連
| ID | 機能名 | 概要 |
|----|----------|------|
| F-01 | デイリーパズル | 毎日更新される盤面をFirebaseから取得し、プレイ可能 |
| F-02 | 難易度設定 | 初級・中級・上級・超上級の4段階 |
| F-03 | 多文字スクリプト対応 | 漢字・アラビア・ローマ字などで盤面表示切替 |
| F-04 | 入力方式 | 盤面タップ→数字入力／数字選択→マス入力 両方に対応 |
| F-05 | クリア判定 | 正答チェックおよびタイム計測 |
| F-06 | ランキング送信 | PlayFabにクリアスコア（時間・難易度）を送信 |

---

### 3.2 システム関連
| ID | 機能名 | 概要 |
|----|----------|------|
| S-01 | デイリーデータ管理 | Firebase Functionsで毎日新しい盤面を自動登録 |
| S-02 | 通知送信 | Firebase Cloud Messagingで「新しいパズル配信」を通知 |
| S-03 | ランキング表示 | PlayFabのLeaderboard APIで難易度別表示 |
| S-04 | 設定保存 | ローカルストレージにテーマ・音量・言語設定を保存 |
| S-05 | 広告制御 | AdMobバナー／インタースティシャルを表示・削除課金で制御 |

---

## 4. 非機能要件

| カテゴリ | 要件内容 |
|-----------|-----------|
| パフォーマンス | 盤面生成・描画は2秒以内で完了すること |
| 安定性 | クラッシュ率1%未満を維持 |
| 容量 | 初回インストール時30MB以内 |
| 表示品質 | 文字崩れがない画像レンダリング方式を採用 |
| 多言語 | UIおよび文字盤面の多言語対応（LTR/RTL両対応） |
| 更新頻度 | デイリーパズル更新は24時間ごとに1回自動実行 |
| 利用可能環境 | オフライン時は前日データをキャッシュ利用可能 |

---

## 5. データ仕様（概要）

| データ項目 | 保存先 | 内容例 |
|-------------|---------|--------|
| ユーザーID | PlayFab | 匿名ログイン（CustomID） |
| パズルデータ | Firebase Firestore | `{ date: "2025-10-30", grid: [...], script: "kanji" }` |
| スコア | PlayFab Leaderboard | `{ userId, time, difficulty, script }` |
| 設定 | ローカル保存 | `{ lang: "ja", theme: "dark" }` |

---

## 6. 運用・更新方針

| 項目 | 方針 |
|------|------|
| デイリーパズル | Firebase Functionsで自動登録 |
| 通知 | FCMにより午前9時（JST）に配信 |
| バグ修正 | 四半期単位でリリース |
| 解析 | Firebase Analytics（必要時導入） |
| データバックアップ | PlayFab・Firebase双方でクラウド保存 |

---

## 7. 外部連携・環境要件

| 区分 | 内容 |
|------|------|
| **API連携** | PlayFab（ユーザー認証・ランキング・スコア管理）<br>Firebase Firestore（デイリーパズル配信）<br>Firebase Cloud Messaging（プッシュ通知）<br>Google AdMob（広告表示） |
| **開発環境** | Flutter 3.x<br>Xcode（iOS開発）<br>Android Studio（Android開発）<br>Figma（UIデザイン） |
| **バックエンド** | Firebase Functions（デイリーパズル自動生成）<br>Firebase Hosting（静的配信）<br>PlayFab Cloud Script（ランキング処理） |
| **データベース** | Firebase Firestore（パズルデータ・設定）<br>PlayFab（ユーザーデータ・スコア）<br>ローカルストレージ（アプリ設定） |
| **分析・監視** | Firebase Analytics（利用状況分析）<br>Firebase Crashlytics（クラッシュ監視）<br>AdMob Analytics（広告収益分析） |
| **配信・運用** | App Store Connect（iOS配信）<br>Google Play Console（Android配信）<br>Firebase App Distribution（βテスト） |

---

## 8. 運用・保守要件

| 項目 | 内容 |
|------|------|
| **運用体制** | 開発担当：木内泉美 <br>対応時間：平日9:00-18:00（JST）<br>緊急時：24時間以内対応 |
| **障害対応ルール** | 重大障害（アプリクラッシュ）：2時間以内対応<br>中程度障害（機能不具合）：24時間以内対応<br>軽微障害（UI表示問題）：1週間以内対応 |
| **リリース管理** | iOS：App Store Connect経由でリリース<br>Android：Google Play Console経由でリリース<br>βテスト：Firebase App Distributionで実施<br>リリース頻度：四半期単位（バグ修正・機能改善） |
| **データバックアップ** | PlayFab：自動バックアップ（クラウド）<br>Firebase：自動バックアップ（Firestore）<br>バックアップ頻度：日次自動実行 |
| **監視・アラート** | Firebase Crashlytics：クラッシュ監視<br>Firebase Analytics：利用状況監視<br>PlayFab：ランキング・スコア監視<br>アラート設定：重大障害時にメール通知 |
| **メンテナンス** | 定期メンテナンス：月1回（日曜日深夜）<br>デイリーパズル更新：毎日午前9時（JST）自動実行<br>データクリーンアップ：月1回実行 |

---

## 9. 成功指標（KPI）

| 指標 | 目標値 | 測定方法 |
|------|---------|-----------|
| ダウンロード数 | 10,000件／3か月 | ストア統計 |
| 継続率（7日） | 20%以上 | Firebase Analytics |
| 広告収益 | ¥○○○／月 | AdMobレポート |
| クラッシュ率 | 1%未満 | Firebase Crashlytics |

---

## 8. リスク・懸念事項

| リスク内容 | 影響 | 対策 |
|------------|------|------|
| **PlayFabとFirebase連携の複雑性** | 高 | 連携仕様を事前に詳細設計し、プロトタイプで検証 |
| **RTL（右→左）言語表示対応** | 中 | FigmaでRTL対応UIを設計し、アラビア語圏でテスト |
| **多文字スクリプトの描画品質** | 高 | 画像ベース描画方式を採用し、文字崩れを防止 |
| **デイリーパズル配信の自動化** | 中 | Firebase Functionsで自動生成ロジックを実装・テスト |
| **Firebase無料枠の制限** | 中 | 利用量を監視し、必要に応じて有料プランに移行 |
| **PlayFab無料枠の制限** | 中 | ユーザー数10万を超える前に収益化を検討 |
| **多言語UIの翻訳品質** | 中 | ネイティブスピーカーによる翻訳レビューを実施 |
| **広告収益の不安定性** | 中 | 複数の収益源（広告削除課金）を検討 |
| **パズル生成アルゴリズムの品質** | 中 | 難易度別のテストケースを十分に準備 |
| **ストア審査の不確実性** | 低 | 審査ガイドラインを事前に確認し、準拠した実装 |

---

## 9. 制約条件
- 教育機能（文字説明・発音など）はMVPでは対象外  
- Firebase無料枠内での運用を前提  
- PlayFab無料枠（〜10万ユーザー）で運用可能範囲を想定  
- デイリーパズル生成ロジックは簡易アルゴリズムで実装

---

## 9. 将来的拡張項目
- マルチプレイ／イベントモード
- SNSシェア機能
- 教育モード（言語学習要素）
- 有料テーマパック／文字拡張パック
- オフライン完全対応

---

## 10. 付録
- ワイヤーフレーム（Figma）  
- 多言語UIテキスト表  
- Firebase / PlayFab 構成図（連携概要）

---
